version: "3"

services:

   hotel-configuration-server:
      image: lucastoledo2010/hotel-configuration-server
      ports:
         - 8888:8888
      environment:
         ENCRYPT_KEY: "IMSYMMETRIC" #NOT SAFE - MAKE THIS PRIVATE REPOSITORY

   database:
      image: postgres:9.5
      ports:
         - "5432:5432"
      volumes:
         - ./db-init-scripts:/docker-entrypoint-initdb.d
      environment:
         POSTGRES_USER: "postgres_dev"
         POSTGRES_PASSWORD: "p0stgr@s_dev" 
         POSTGRES_DB: "hotel_booking_system_dev"

   hotel-reservations-service:
      image: lucastoledo2010/hotel-reservations-service
      ports:
         - 8080:8080
      depends_on:
        - hotel-configuration-server
      environment:
          PROFILE: "dev"
          CONFIGSERVER_URI: "http://hotel-configuration-server:8888"
          CONFIGSERVER_PORT:   "8888"
          DATABASESERVER_PORT: "5432"
          ENCRYPT_KEY: "IMSYMMETRIC" #NOT SAFE - MAKE THIS PRIVATE REPOSITORY
